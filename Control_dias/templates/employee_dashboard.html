{% extends "base.html" %}

{% block title %}Dashboard de {{ employee.username }}{% endblock %}

{% block content %}
<div class="container">
  <h2 class="mb-4 text-center">Dashboard - {{ employee.username }}</h2>

  <!-- Vacaciones -->
  <div class="row mb-5">
    <div class="col-md-6 text-center">
      <img src="data:image/png;base64,{{ vac_chart }}" class="img-fluid" alt="Gráfico de Vacaciones">
    </div>
    <div class="col-md-6">
      <h5 class="text-primary">Resumen de Vacaciones</h5>
      <table class="table table-sm table-bordered">
        <tbody>
          <tr>
            <th>Total asignadas</th>
            <td>{{ vac_total|int }}</td>
          </tr>
          <tr>
            <th>Usadas</th>
            <td>{{ vac_used|int }}</td>
          </tr>
          <tr>
            <th>Disponibles</th>
            <td>{{ vac_available|int }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Días Administrativos -->
  <div class="row mb-5">
    <div class="col-md-6 text-center">
      <img src="data:image/png;base64,{{ admin_chart }}" class="img-fluid" alt="Gráfico de Días Administrativos">
    </div>
    <div class="col-md-6">
      <h5 class="text-warning">Resumen de Días Administrativos</h5>
      <table class="table table-sm table-bordered">
        <tbody>
          <tr>
            <th>Total permitidos</th>
            <td>{{ admin_max|round(2) }}</td>
          </tr>
          <tr>
            <th>Usados</th>
            <td>{{ admin_used|round(2) }}</td>
          </tr>
          <tr>
            <th>Disponibles</th>
            <td>{{ admin_available|round(2) }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Horas Extras -->
  <div class="row mb-5">
    <div class="col-md-6 text-center">
      <img src="data:image/png;base64,{{ hours_chart }}" class="img-fluid" alt="Gráfico de Horas Extras y Compensadas">
    </div>
    <div class="col-md-6">
      <h5 class="text-success">Resumen de Horas Extras</h5>
      <table class="table table-sm table-bordered">
        <tbody>
          <tr>
            <th>Total aprobadas</th>
            <td>{{ extra_approved|round(2) }}</td>
          </tr>
          <tr>
            <th>Compensadas</th>
            <td>{{ comp_requested|round(2) }}</td>
          </tr>
          <tr>
            <th>Disponibles</th>
            <td>{{ hours_available|round(2) }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
